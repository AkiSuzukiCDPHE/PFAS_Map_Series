getwd()
# Sub this file and file path out for new data each time
AllWater_05.08 <- read_excel("01_Raw_Data/Test_Datasets.xlsx")
library(readxl)
library(dplyr)
getwd()
# Sub this file and file path out for new data each time
AllWater_05.08 <- read_excel("01_Raw_Data/Test_Datasets.xlsx")
# Sub this file and file path out for new data each time
AllWater_05.08 <- read_excel("/01_Raw_Data/Test_Datasets.xlsx")
getwd()
# Sub this file and file path out for new data each time
AllWater_05.08 <- read_excel("/01_Raw_Data/Test_Datasets.xlsx")
# Sub this file and file path out for new data each time
AllWater_05.08 <- read_excel("01_Raw_Data/Test_Datasets.xlsx")
# Sub this file and file path out for new data each time
AllWater_05.08 <- read_excel("/01_Raw_Data/Test_Datasets.xlsx")
# Sub this file and file path out for new data each time
AllWater_05.08 <- read_excel("01_Raw_Data/Test_Datasets.xlsx")
# Sub this file and file path out for new data each time
AllWater_05.08 <- read_excel("/01_Raw_Data/Test_Datasets.xlsx")
library(readxl)
library(dplyr)
getwd()
# Sub this file and file path out for new data each time
AllWater_05.08 <- read_excel("/01_Raw_Data/Test_Datasets.xlsx")
# Sub this file and file path out for new data each time
Test <- read_excel("/01_Raw_Data/Test_Datasets/WQCD_PFAS_Databases.xlsx")
# Sub this file and file path out for new data each time
Test <- read_excel("01_Raw_Data/Test_Datasets/WQCD_PFAS_Databases.xlsx")
View(Test)
# Sub this file and file path out for new data each time
Test <- read_excel("01_Raw_Data/Test_Datasets/WQCD_PFAS_Databases.xlsx")
View(Test)
# Replace all spaces in names of variables with underscores
names(WQCD_PFAS_DB) <- gsub("\\s", "_", names((WQCD_PFAS_DB)))
# Sub this file and file path out for new data each time
WQCD_PFAS_DB <- read_excel("01_Raw_Data/Test_Datasets/WQCD_PFAS_Databases.xlsx")
# Replace all spaces in names of variables with underscores
names(WQCD_PFAS_DB) <- gsub("\\s", "_", names((WQCD_PFAS_DB)))
View(WQCD_PFAS_DB)
# Filtering the DF for untreated water
WQCD_PFAS_DB_1 <- WQCD_PFAS_DB %>% filter (Treatment_Status == "UNF")
# Filtering the DF for untreated water
WQCD_PFAS_DB_1 <- WQCD_PFAS_DB %>% filter (Treatment_Status == "UNF")
glimpse(WQCD_PFAS_DB)
# Filtering the DF for untreated water
WQCD_PFAS_DB_1 <- WQCD_PFAS_DB %>% filter (TreatmentStatus == "UNF")
colnames(WQCD_PFAS_DB_1)
View(WQCD_PFAS_DB_1)
# Sub this file and file path out for new data each time
WQCD_PFAS_DB <- read_excel("01_Raw_Data/Test_Datasets/WQCD_PFAS_Databases.xlsx")
glimpse(WQCD_PFAS_DB)
View(Test)
colnames(WQCD_PFAS_DB_1)
PFAS_Analytes <- c(
"_11Cl_PF3OUdS",
"_3_3a_3_20_FTCA",
"_4_3a_2_20_FTS",
"_5_3_20_FTCA",
"_6_2FTS",
"_7_3a_3_20_FTCA",
"_8_3a_2_20_FTS",
"_9Cl_2d_PF3ONS",
"ADONA",
"FOSA",
"GenX",
"NEtFOSAA",
"NMeFOSA",
"NMeFOSAA",
"NEtFOSA",
"NEtFOSE",
"NFDHA",
"NMeFOSE",
"PFOA",
"PFOS",
"PFBA",
"PFBS",
"PFDA",
"PFNS",
"PFNA",
"PFHxA",
"PFHxS",
"PFDS",
"PFDoS",
"PFDoA",
"PFHpS",
"PFHpA",
"PFEESA",
"PFMBA",
"PFMPA",
"PFPeS",
"PFPeA",
"PFTeA",
"PFTriA",
"PFUnA"
)
WQCD_PFAS_DB_1 <- WQCD_PFAS_DB_1 %>%
mutate_at(vars(all_of(PFAS_Analytes)), ~ ifelse(.=="null" | . == "ND", 0, .))
View(WQCD_PFAS_DB_1)
# Filtering the DF for untreated water
WQCD_PFAS_DB_1 <- WQCD_PFAS_DB %>% filter (TreatmentStatus == "UNF")
View(WQCD_PFAS_DB_1)
# Sub this file and file path out for new data each time
WQCD_PFAS_DB <- read_excel("01_Raw_Data/Test_Datasets/WQCD_PFAS_Databases.xlsx")
View(WQCD_PFAS_DB)
install.packages("readxl")
library(readxl)
library(dplyr)
# Importing data
Fish_CDPHE_PFAS <- read_excel("X:\\Shared drives\\_CDPHE TEEO Data\\_Enviro\\PFAS\\PFAS Concentration Map May 2024 Update\\PFASMap 2024_RProject\\01_Raw_Data\\Fish Data\\Fish_CDPHE_PFAS.xlsx")
View(Fish_CDPHE_PFAS)
library(readxl)
library(dplyr)
# Importing data
PFOS_FCA_Soil_SW_2023 <- read_excel("X:\\Shared drives\\_CDPHE TEEO Data\\_Enviro\\PFAS\\PFAS Concentration Map May 2024 Update\\PFASMap 2024_RProject\\01_Raw_Data\\2023_PFAS_Soil&Sediment_Lakes.xlsx")
# Check to see columns in DF
colnames(PFOS_FCA_Soil_SW_2023)
table(PFOS_FCA_Soil_SW_2023_1$VAL_Result)
table(PFOS_FCA_Soil_SW$VAL_Result)
# Filter out values that are not blank for spiked
PFOS_FCA_Soil_SW_2023_1 <- PFOS_FCA_Soil_SW_2023 %>% filter(Spiked == "" |
is.na(Spiked) &
(Units != "%REC") & Aliquot == "SA" &  Validation_Level != "NV")
table(PFOS_FCA_Soil_SW_2023_2$Client_ID)
# Filter out duplicate
PFOS_FCA_Soil_SW_2023_2 <- PFOS_FCA_Soil_SW_2023_1 %>% filter(!(Client_ID %in% c("P2023001_W_DUP", "P2023001_S_DUP")))
table(PFOS_FCA_Soil_SW_2023_2$Client_ID)
# Filtering to remove duplicates of the same waterbody, collection date, PFAS analyte, and result
PFOS_FCA_Soil_SW_2023_3 <- PFOS_FCA_Soil_SW_2023_2 %>%
group_by(Waterbody, Matrix, Component, Client_ID) %>%
distinct() %>%
ungroup()
# Replace Non-detects with 0
PFOS_FCA_Soil_SW_2023_4 <- PFOS_FCA_Soil_SW_2023_3 %>%
mutate(Result = case_when(Result == "ND" ~ "0", TRUE ~ Result))
View(PFOS_FCA_Soil_SW_2023_4)
# Replace Non-detects with 0
PFOS_FCA_Soil_SW_2023_4 <- PFOS_FCA_Soil_SW_2023_3 %>%
mutate(Result = case_when(Result == "ND" ~ "0.0", TRUE ~ Result))
# Turn the result column into a numeric variable
PFOS_FCA_Soil_SW_2023_4$Result <- as.numeric(PFOS_FCA_Soil_SW_2023_4$Result)
# Round results column to 2 decimal place
# Round the 'Value' column to 1 decimal place
PFOS_FCA_Soil_SW_2023_4$Result <- round(PFOS_FCA_Soil_SW_2023_4$Result, digits = 1)
View(PFOS_FCA_Soil_SW_2023_4)
# Replace Non-detects with 0
PFOS_FCA_Soil_SW_2023_4 <- PFOS_FCA_Soil_SW_2023_3 %>%
mutate(Result = case_when(Result == "ND"| "0" ~ "0.0", TRUE ~ Result))
# Replace Non-detects with 0
PFOS_FCA_Soil_SW_2023_4 <- PFOS_FCA_Soil_SW_2023_3 %>%
mutate(Result = case_when(Result %in% ("ND","0") ~ "0.0", TRUE ~ Result))
# Replace Non-detects with 0
PFOS_FCA_Soil_SW_2023_4 <- PFOS_FCA_Soil_SW_2023_3 %>%
mutate(Result = case_when(Result %in% c("ND","0") ~ "0.0", TRUE ~ Result))
# Turn the result column into a numeric variable
PFOS_FCA_Soil_SW_2023_4$Result <- as.numeric(PFOS_FCA_Soil_SW_2023_4$Result)
# Round results column to 2 decimal place
# Round the 'Value' column to 1 decimal place
PFOS_FCA_Soil_SW_2023_4$Result <- round(PFOS_FCA_Soil_SW_2023_4$Result, digits = 1)
View(PFOS_FCA_Soil_SW_2023_4)
class(PFOS_FCA_Soil_SW_2023_4$Result)
# Try using all variables as id_cols
#check for val_result=NA
PFOS_FCA_Soil_SW_2023_Wide <- PFOS_FCA_Soil_SW_2023_3 %>%
pivot_wider(
id_cols = c(
"Waterbody",
"Client_ID",
"Collected",
"Matrix",
"SampleNumber",
"Units",
"Latitude",
"Longitude"
),
names_from = Component,
values_from = Result
)
# Transpose the data from long to wide format:
# Id_Cols = specify the column(s) that you want to keep as identifiers (i.e., columns that remain as is and do not get spread)
# names_from =  specifies the column from which the values will be spread to form new columns.
# Values_from =  specifies the columns whose values will be spread into new columns (names_from columns).
library(tidyr)
library(dplyr)
# Try using all variables as id_cols
#check for val_result=NA
PFOS_FCA_Soil_SW_2023_Wide <- PFOS_FCA_Soil_SW_2023_3 %>%
pivot_wider(
id_cols = c(
"Waterbody",
"Client_ID",
"Collected",
"Matrix",
"SampleNumber",
"Units",
"Latitude",
"Longitude"
),
names_from = Component,
values_from = Result
)
View(PFOS_FCA_Soil_SW_2023_Wide)
# Try using all variables as id_cols
#check for val_result=NA
PFOS_FCA_Soil_SW_2023_Wide <- PFOS_FCA_Soil_SW_2023_4 %>%
pivot_wider(
id_cols = c(
"Waterbody",
"Client_ID",
"Collected",
"Matrix",
"SampleNumber",
"Units",
"Latitude",
"Longitude"
),
names_from = Component,
values_from = Result
)
# Get DF column names
colnames(PFOS_FCA_Soil_SW_2023_Wide)
View(PFOS_FCA_Soil_SW_2023)
View(PFOS_FCA_Soil_SW_2023)
e
# Rename variables to standardize across datasets, create variables, and remove extraneous variables
PFOS_FCA_Sed_SW_2023_Wide1 <- PFOS_FCA_Sed_SW_2023_Wide %>%
rename(
Site = Waterbody,
Sample_Date = Collected,
Sample_ID = Client_ID,
GenX = "HFPO-DA (GenX)",
ADONA = "4,8-Dioxa-3H-perfluorononanoic acid (ADONA)",
NEtFOSAA = "N-ethylperfluorooctanesulfonamidoacetic acid (NEtFOSAA)",
NFDHA = "NFDHA",
NMeFOSE = "NMeFOSE",
NMeFOSA = "N-methylperfluorooctane sulfonamide (NMeFOSA)",
NMeFOSAA = "N-methylperfluorooctanesulfonamidoacetic acid (NMeFOSAA)",
PFBS = "Perfluorobutanesulfonic acid (PFBS)",
PFBA = "Perfluorobutanoic acid (PFBA)",
PFDS = "Perfluorodecanesulfonic acid (PFDS)",
PFDA = "Perfluorodecanoic acid (PFDA)",
PFDoS = "Perfluorododecanesulfonic acid (PFDoS)",
PFDoA = "Perfluorododecanoic acid (PFDoA)",
PFHpS = "Perfluoroheptanesulfonic acid (PFHpS)",
PFHpA = "Perfluoroheptanoic acid (PFHpA)",
PFHxS = "Perfluorohexanesulfonic acid (PFHxS)",
PFHxA = "Perfluorohexanoic acid (PFHxA)",
PFNS = "Perfluorononanesulfonic acid (PFNS)",
PFNA = "Perfluorononanoic acid (PFNA)",
FOSA = "Perfluorooctanesulfonamide (FOSA)",
PFOS = "Perfluorooctanesulfonic acid (PFOS)",
PFOA = "Perfluorooctanoic acid (PFOA)",
PFPeS = "Perfluoropentanesulfonic acid (PFPeS)",
PFPeA = "Perfluoropentanoic acid (PFPeA)",
PFTeA = "Perfluorotetradecanoic acid (PFTeA)",
PFTriA = "Perfluorotridecanoic acid (PFTriA)",
PFUnA = "Perfluoroundecanoic acid (PFUnA)",
Notes = Matrix
)
# Rename variables to standardize across datasets, create variables, and remove extraneous variables
PFOS_FCA_Sed_SW_2023_Wide1 <- PFOS_FCA_Sed_SW_2023_Wide %>%
rename(
Site = Waterbody,
Sample_Date = Collected,
Sample_ID = Client_ID,
GenX = "HFPO-DA (GenX)",
ADONA = "4,8-Dioxa-3H-perfluorononanoic acid (ADONA)",
NEtFOSAA = "N-ethylperfluorooctanesulfonamidoacetic acid (NEtFOSAA)",
NFDHA = "NFDHA",
NMeFOSE = "NMeFOSE",
NMeFOSA = "N-methylperfluorooctane sulfonamide (NMeFOSA)",
NMeFOSAA = "N-methylperfluorooctanesulfonamidoacetic acid (NMeFOSAA)",
PFBS = "Perfluorobutanesulfonic acid (PFBS)",
PFBA = "Perfluorobutanoic acid (PFBA)",
PFDS = "Perfluorodecanesulfonic acid (PFDS)",
PFDA = "Perfluorodecanoic acid (PFDA)",
PFDoS = "Perfluorododecanesulfonic acid (PFDoS)",
PFDoA = "Perfluorododecanoic acid (PFDoA)",
PFHpS = "Perfluoroheptanesulfonic acid (PFHpS)",
PFHpA = "Perfluoroheptanoic acid (PFHpA)",
PFHxS = "Perfluorohexanesulfonic acid (PFHxS)",
PFHxA = "Perfluorohexanoic acid (PFHxA)",
PFNS = "Perfluorononanesulfonic acid (PFNS)",
PFNA = "Perfluorononanoic acid (PFNA)",
FOSA = "Perfluorooctanesulfonamide (FOSA)",
PFOS = "Perfluorooctanesulfonic acid (PFOS)",
PFOA = "Perfluorooctanoic acid (PFOA)",
PFPeS = "Perfluoropentanesulfonic acid (PFPeS)",
PFPeA = "Perfluoropentanoic acid (PFPeA)",
PFTeA = "Perfluorotetradecanoic acid (PFTeA)",
PFTriA = "Perfluorotridecanoic acid (PFTriA)",
PFUnA = "Perfluoroundecanoic acid (PFUnA)",
Notes = Matrix
)
# Try using all variables as id_cols
#check for val_result=NA
PFOS_FCA_Sed_SW_2023_Wide <- PFOS_FCA_Sed_SW_2023_4 %>%
pivot_wider(
id_cols = c(
"Waterbody",
"Client_ID",
"Collected",
"Matrix",
"SampleNumber",
"Units",
"Latitude",
"Longitude"
),
names_from = Component,
values_from = Result
)
0
# Round results column to 1 decimal place
PFOS_FCA_Sed_SW_2023_4$Result <- round(PFOS_FCA_Sed_SW_2023_4$Result, digits = 1)
class(PFOS_FCA_Sed_SW_2023_4$Result)
# Importing data
PFOS_FCA_Sed_SW_2023 <- read_excel(
"X:\\Shared drives\\_CDPHE TEEO Data\\_Enviro\\PFAS\\PFAS Concentration Map May 2024 Update\\PFASMap 2024_RProject\\01_Raw_Data\\2023_PFAS_Sed&Sediment_Lakes.xlsx"
)
# Importing data
PFOS_FCA_Sed_SW_2023 <- read_excel(
"X:\\Shared drives\\_CDPHE TEEO Data\\_Enviro\\PFAS\\PFAS Concentration Map May 2024 Update\\PFASMap 2024_RProject\\01_Raw_Data\\2023_PFAS_Sed&Sediment_Lakes.xlsx"
)
# Check to see columns in DF
colnames(PFOS_FCA_Sed_SW_2023)
# Filter out values that are not blank for spiked
PFOS_FCA_Sed_SW_2023_1 <- PFOS_FCA_Sed_SW_2023 %>% filter(Spiked == "" |
is.na(Spiked) &
(Units != "%REC") & Aliquot == "SA" &  Validation_Level != "NV")
# Filter out duplicate
PFOS_FCA_Sed_SW_2023_2 <- PFOS_FCA_Sed_SW_2023_1 %>% filter(!(Client_ID %in% c("P2023001_W_DUP", "P2023001_S_DUP")))
# Importing data
PFOS_FCA_Sed_SW_2023 <- read_excel(
"X:\\Shared drives\\_CDPHE TEEO Data\\_Enviro\\PFAS\\PFAS Concentration Map May 2024 Update\\PFASMap 2024_RProject\\01_Raw_Data\\2023_PFAS_Sed&Sediment_Lakes.xlsx"
)
# Importing data
PFOS_FCA_Sed_SW_2023 <- read_excel(
"X:\\Shared drives\\_CDPHE TEEO Data\\_Enviro\\PFAS\\PFAS Concentration Map May 2024 Update\\PFASMap 2024_RProject\\01_Raw_Data\\2023_PFAS_Sed&Sediment_Lakes.xlsx"
)
# Importing data
PFOS_FCA_Sed_SW_2023 <- read_excel(
"X:\\Shared drives\\_CDPHE TEEO Data\\_Enviro\\PFAS\\PFAS Concentration Map May 2024 Update\\PFASMap 2024_RProject\\01_Raw_Data\\2023_PFAS_Sed&Sediment_Lakes.xlsx"
)
getwd()
# Importing data
PFOS_FCA_Sed_SW_2023 <- read_excel(
"X:\\Shared drives\\_CDPHE TEEO Data\\_Enviro\\PFAS\\PFAS Concentration Map May 2024 Update\\PFASMap 2024_RProject\\01_Raw_Data\\2023_PFAS_Sed&Sediment_Lakes.xlsx"
)
# Importing data
PFOS_FCA_Sed_SW_2023 <- read_excel(
"X:\\Shared drives\\_CDPHE TEEO Data\\_Enviro\\PFAS\\PFAS Concentration Map May 2024 Update\\PFASMap 2024_RProject\\01_Raw_Data\\2023_PFAS_Sed&Sediment_Lakes.xlsx")
library(readxl)
library(dplyr)
getwd()
# Importing data
PFOS_FCA_Sed_SW_2023 <- read_excel(
"X:\\Shared drives\\_CDPHE TEEO Data\\_Enviro\\PFAS\\PFAS Concentration Map May 2024 Update\\PFASMap 2024_RProject\\01_Raw_Data\\2023_PFAS_Sed&Sediment_Lakes.xlsx")
# Importing data
PFOS_FCA_Sed_SW_2023 <- read_excel(
"X:\\Shared drives\\_CDPHE TEEO Data\\_Enviro\\PFAS\\PFAS Concentration Map May 2024 Update\\PFASMap 2024_RProject\\01_Raw_Data\\2023_PFAS_Sed&Sediment_Lakes.xlsx")
View(PFOS_FCA_Soil_SW_2023)
# Check to see columns in DF
colnames(PFOS_FCA_Sed_SW_2023)
# Filter out values that are not blank for spiked
PFOS_FCA_Sed_SW_2023_1 <- PFOS_FCA_Sed_SW_2023 %>% filter(Spiked == "" |
is.na(Spiked) &
(Units != "%REC") & Aliquot == "SA" &  Validation_Level != "NV")
# Filter out duplicate
PFOS_FCA_Sed_SW_2023_2 <- PFOS_FCA_Sed_SW_2023_1 %>% filter(!(Client_ID %in% c("P2023001_W_DUP", "P2023001_S_DUP")))
# View the number of samples per client ID
table(PFOS_FCA_Sed_SW_2023_2$Client_ID)
# Filtering to remove duplicates of the same waterbody, collection date, PFAS analyte, and result
PFOS_FCA_Sed_SW_2023_3 <- PFOS_FCA_Sed_SW_2023_2 %>%
group_by(Waterbody, Matrix, Component, Client_ID) %>%
distinct() %>%
ungroup()
# Replace Non-detects with 0
PFOS_FCA_Sed_SW_2023_4 <- PFOS_FCA_Sed_SW_2023_3 %>%
mutate(Result = case_when(Result %in% c("ND","0") ~ "0.0", TRUE ~ Result))
# Turn the result column into a numeric variable
PFOS_FCA_Sed_SW_2023_4$Result <- as.numeric(PFOS_FCA_Sed_SW_2023_4$Result)
# Round results column to 1 decimal place
PFOS_FCA_Sed_SW_2023_4$Result <- round(PFOS_FCA_Sed_SW_2023_4$Result, digits = 1)
